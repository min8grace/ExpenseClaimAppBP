@inherits DisplayClaimDetailBase
@attribute [Authorize]

@if (Claim == null || Claim.LineItems == null)
{
    <div class="spinner"></div>
}
else
{
    <h1>Display Expense Claim</h1>
    <div>
        <hr />
        <dl class="row">
            <dt class="col-sm-2">
                Claim no.
            </dt>
            <dd class="col-sm-10">
                @Claim.Id
            </dd>
            <dt class="col-sm-2">
                Title
            </dt>
            <dd class="col-sm-10">
                @Claim.Title
            </dd>
            <dt class="col-sm-2">
                Requester
            </dt>
            <dd class="col-sm-10">
                @Claim.Requester
            </dd>
            @*<dt class="col-sm-2">
            Approver
        </dt>
        <dd class="col-sm-10">
            @Claim.Approver
        </dd>*@
            <dt class="col-sm-2">
                Submit Date
            </dt>
            <dd class="col-sm-10">
                @Claim.SubmitDate
            </dd>
            <dt class="col-sm-2">
                Approval Date
            </dt>
            <dd class="col-sm-10">
                @Claim.ApprovalDate
            </dd>
            <dt class="col-sm-2">
                Processed Date
            </dt>
            <dd class="col-sm-10">
                @Claim.ProcessedDate
            </dd>
            <dt class="col-sm-2">
                Total Amount
            </dt>
            <dd class="col-sm-10">
                @Claim.TotalAmount
            </dd>
            <dt class="col-sm-2">
                Status
            </dt>
            <dd class="col-sm-10">
                @Claim.Status
            </dd>
            <dt class="col-sm-2">
                Requester Comment
            </dt>
            <dd class="col-sm-10">
                @Claim.RequesterComments
            </dd>
            <dt class="col-sm-2">
                Approver Comment
            </dt>
            <dd class="col-sm-10">
                @Claim.ApproverComments
            </dd>
            <dt class="col-sm-2">
                Finance Comment
            </dt>
            <dd class="col-sm-10">
                @Claim.FinanceComments
            </dd>
        </dl>

    </div>

    <hr class="rounded">


    @if (Claim.LineItems != null)
    {
        <h3>
            Items in the Claim
        </h3>
        <table class="table">
            <tr>
                <th>Category</th>
                <th>Payee</th>
                <th>Date</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Currency</th>
                <th>USD</th>
                <th>Receipt</th>
            </tr>
            @foreach (var item in Claim.LineItems)
            {
                <tr>
                    <td>
                        @item.Category.Name
                    </td>
                    <td>
                        @item.Payee
                    </td>
                    <td>
                        @item.Date
                    </td>
                    <td>
                        @item.Description
                    </td>
                    <td>
                        @item.Amount
                    </td>
                    <td>
                        @item.Currency.Name
                    </td>
                    <td>
                        @item.USDAmount
                    </td>
                    <td>
                        <div class="card" style="width:3rem;">
                            <div class="card-body">
                                @*@if (len >0)
                                    {
                                       var format = "image/png";
                                        var imageDataUrl = $"data:{format};base64,{Convert.ToBase64String(@item.Receipt)}";
                                        IList<string> imageDataUrls = new List<string>();
                                        imageDataUrls.Add(imageDataUrl);

                                        @foreach (var image in imageDataUrls)
                                        {
                                            <img class="rounded m-1" src="@image" />
                                        }
                                    }*@
                            </div>
                        </div>

                        @*<a href="@($"lineitem/edit/{item.Id}")" class="btn btn-primary m-0">Edit</a>
                            <a href="@($"lineitem/detail/{item.Id}")" class="btn btn-primary m-0">Detail</a>
                            <a href="/" class="btn btn-primary m-0">Delete</a>*@
                        @*<a href="#" class="btn btn-primary m-0" value="@item.ClaimId" @onclick="Delete_Click">Delete</a>*@
                        @*<button class="btn btn-danger" type="button" value="@ClaimId" @onclick="Delete_Click">
                              Delete
                            </button>*@
                    </td>
                </tr>
            }
        </table>
    }
}

<button class="btn btn-outline-primary" type="button" @onclick="BackToList">
    Back to full List
</button>




